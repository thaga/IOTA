var JSX={};(function(d){function a(b,e){var a=function(){};a.prototype=e.prototype;var c=new a;for(var d in b){b[d].prototype=c}}function at(c,b){for(var a in b.prototype)if(b.prototype.hasOwnProperty(a))c.prototype[a]=b.prototype[a]}function s(a,b,d){function c(a,b,c){delete a[b];a[b]=c;return c}Object.defineProperty(a,b,{get:function(){return c(a,b,d())},set:function(d){c(a,b,d)},enumerable:true,configurable:true})}function as(a,b,c){return a[b]=a[b]/c|0}var an=parseInt;var u=parseFloat;function ar(a){return a!==a}var w=isFinite;var x=encodeURIComponent;var A=decodeURIComponent;var C=encodeURI;var Q=decodeURI;var ai=Object.prototype.toString;var aj=Object.prototype.hasOwnProperty;function f(){}d.require=function(b){var a=t[b];return a!==undefined?a:null};d.profilerIsRunning=function(){return f.getResults!=null};d.getProfileResults=function(){return(f.getResults||function(){return{}})()};d.postProfileResults=function(a,b){if(f.postResults==null)throw new Error('profiler has not been turned on');return f.postResults(a,b)};d.resetProfileResults=function(){if(f.resetResults==null)throw new Error('profiler has not been turned on');return f.resetResults()};d.DEBUG=false;function am(){};a([am],Error);function l(){};a([l],Object);function aq(i){var a;var g;var h;var d;var b;var e;var f;a=c.A.getElementById('iota_canvas');if(a){a.style.position='absolute';a.style.left='0px';a.style.top='0px';g=c.A.getElementById('iota_input');h=new o(a,g);a.width=c._.innerWidth;a.height=c._.innerHeight;c._.onresize=function(b){a.width=c._.innerWidth;a.height=c._.innerHeight;h.P()}}d=c._.document.getElementsByTagName('canvas');for(b=0;b<d.length;++b){e=d[b];f=e.dataset.thetaImg;if(f){(function(b,d){var a;a=c._.document.createElement('img');a.onload=function(c){new k(b,null,a)};a.src=d}(e,f))}}};l.main=aq;function k(b,y,H){var J=this;var z;var C;var F;var G;var a;var I;var E;var x;var o;var p;var d;var n;var k;var t;var l;var A;var B;var m;var w;var D;var h;var f;var s;var q;var u;var v;this.P=null;z=128;C=64;function F(c,e){var d;var a;var b;d=new Float32Array((c+1)*(e+1)*2);for(a=0;a<=e;++a){for(b=0;b<=c;++b){d[(a*(c+1)+b)*2]=b/c;d[(a*(c+1)+b)*2+1]=a/e}}return d}function G(b,f){var d;var e;var a;var c;d=(b+1)*2+2;e=new Uint16Array(d*f);for(a=0;a<f;++a){for(c=0;c<=b;++c){e[a*d+c*2]=(a+1)*(b+1)+c;e[a*d+c*2+1]=a*(b+1)+c}e[a*d+(b+1)*2]=(a+1)*(b+1)+b;e[a*d+(b+1)*2+1]=(a+1)*(b+1)+b}return e}a=b.getContext('experimental-webgl',{premultipliedAlpha:false});I=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,I);a.bufferData(a.ARRAY_BUFFER,F(z|0,C|0),a.STATIC_DRAW);E=a.createBuffer();x=G(z|0,C|0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,E);a.bufferData(a.ELEMENT_ARRAY_BUFFER,x,a.STATIC_DRAW);a.vertexAttribPointer(0,2,a.FLOAT,false,0,0);a.enableVertexAttribArray(0);o=a.createShader(a.VERTEX_SHADER);a.shaderSource(o,'\n			precision mediump float;\n			uniform mat4 projectionMatrix;\n			attribute vec2 position;\n			varying vec2 v_texcoord;\n			void main() {\n				float h = (position.x + 0.25) * 3.14159265 * 2.0;\n				float v = (position.y - 0.5) * 3.14159265;\n				float hc = cos(h), hs = sin(h);\n				float vc = cos(v), vs = sin(v);\n				v_texcoord = position;\n				gl_Position = projectionMatrix * vec4(vc * hc, vs, vc * hs, 1.0);\n			}\n		');a.compileShader(o);if(!!!a.getShaderParameter(o,a.COMPILE_STATUS)){console.log(a.getShaderInfoLog(o))}p=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(p,'\n			precision mediump float;\n			uniform sampler2D texture;\n			varying vec2 v_texcoord;\n			void main() {\n				gl_FragColor = texture2D(texture, v_texcoord);\n			}\n		');a.compileShader(p);if(!!!a.getShaderParameter(p,a.COMPILE_STATUS)){console.log(a.getShaderInfoLog(p))}d=a.createProgram();a.attachShader(d,o);a.attachShader(d,p);a.linkProgram(d);if(!!!a.getProgramParameter(d,a.LINK_STATUS)){console.log(a.getProgramInfoLog(d))}a.useProgram(d);n=null;k=.1;t=0;l=0;A=0;B=0;function m(){var f;var c;var m;var o;var p;var q;var G;var J;var N;var w;var y;var z;var h;var D;var E;var F;var s;var H;var I;var u;var K;var L;var M;var v;var C;if(!n){return}f=b.width;c=b.height;p=f/c;m=1>=p?1:p;q=c/f;o=1>=q?1:q;a.uniform1i(a.getUniformLocation(d,'texture'),0);a.uniformMatrix4fv(a.getUniformLocation(d,'projectionMatrix'),false,r((v=(u=(s=(h=(G=-.1*m,J=.1*m,N=-.1*o,w=.1*o,ao(new e,G,J,N,w,k,1.1)),D=(y=-l,z=new e,i(z,y,1,0,0)),j(h,new g(h),D)),H=(E=-t,F=new e,i(F,E,0,1,0)),j(s,new g(s),H)),K=(I=new e,i(I,B,1,0,0)),j(u,new g(u),K)),C=(L=-A,M=new e,i(M,L,0,0,1)),j(v,new g(v),C))));a.viewport(0,0,f,c);a.clearColor(.1,.2,.3,1);a.clear(a.COLOR_BUFFER_BIT);a.drawElements(a.TRIANGLE_STRIP,x.length,a.UNSIGNED_SHORT,0)}this.P=m;function w(b){if(!n){n=a.createTexture();a.bindTexture(a.TEXTURE_2D,n)}a.pixelStorei(a.UNPACK_ALIGNMENT,1);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);a.bindTexture(a.TEXTURE_2D,n);a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);m()}function D(a){k*=Math.pow(.9,a);if(k>.9){k=.9}if(k<.01){k=.01}m()}if(H){w(H)}h=null;f=-1;function s(b){var d;var e;var a;if(!h){return}if(b<0||b>=h.length){return}d=h[b];e=new FileReader;e.onload=function(b){var a;a=c.A.createElement('img');a.onload=function(b){t=0;l=0;w(a)};a.src=b.target.result};e.readAsDataURL(d);a=new FileReader;a.onload=function(q){var h;var c;var b;var g;var i;var d;var e;var f;var l;var n;var o;var p;var j;var k;h=a.result+'';c=new Uint8Array(h.length);b=0;for(b=0;b<c.length;++b){c[b]=h.charCodeAt(b)&255}g=[0,3,0,10,0,0,0,2];i=1e4;for(d=0;d<i;++d){for(b=0;b<g.length;++b){if(c[b+d]!==g[b]){break}}if(b===g.length){break}}if(d===i){return}d+=g.length;function e(a,b){return a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3]}f=e(c,d|0)+12;if(f>c.length-16){return}l=e(c,f|0);n=e(c,f+4|0);o=e(c,f+8|0);p=e(c,f+12|0);j=l/n;k=o/p;A=j*Math.PI/180;B=k*Math.PI/180;m()};a.readAsBinaryString(d)}if(y){y.onchange=function(a){h=y.files;s((f=0)|0)}}b.ondragover=function(a){a.preventDefault()};b.ondrop=function(a){var b;a.preventDefault();b=a;h=b.dataTransfer.files;s((f=0)|0)};b.onmousewheel=function(a){var b;a.preventDefault();b=a;D(+b.wheelDelta/-120)};b.addEventListener('DOMMouseScroll',function(a){var b;a.preventDefault();b=a;D(b.detail/3)},false);q=false;u=0;v=0;b.onmousedown=function(b){var a;b.preventDefault();a=b;if(a.button===0){q=true;u=a.clientX;v=a.clientY}};b.onmouseup=function(a){var b;a.preventDefault();b=a;if(b.button===0){q=false}};b.onmouseout=function(a){q=false};b.onmousemove=function(d){var a;var c;d.preventDefault();a=d;if(q){c=1/Math.sqrt(b.width*b.height*k);t+=(a.clientX-u)*c;l+=(a.clientY-v)*c;if(l>1.570796325){l=1.570796325}if(l<-1.570796325){l=-1.570796325}m();u=a.clientX;v=a.clientY}};c._.addEventListener('keydown',function(b){var a;if(!h){return}a=b;switch(a.keyCode){default:break;case 37:if(--f>=0){s(f|0)}else{f=0}break;case 39:if(++f<h.length){s(f|0)}else{f=h.length-1}break}})};function o(a,b){var c=this;k.call(this,a,b,null)};a([k,o],Object);function c(){};a([c],Object);function b(){};a([b],Object);function y(){};a([y],b);function z(){};a([z],Object);function p(){};a([p],b);function B(){};a([B],Object);function q(){};a([q],p);function D(){};a([D],Object);function E(){};a([E],Object);function F(){};a([F],Object);function G(){};a([G],b);function H(){};a([H],Object);function I(){};a([I],Object);function J(){};a([J],b);function K(){};a([K],b);function L(){};a([L],b);function M(){};a([M],b);function N(){};a([N],b);function O(){};a([O],q);function P(){};a([P],b);function ak(){};a([ak],b);function R(){};a([R],b);function S(){};a([S],Object);function T(){};a([T],Object);function U(){};a([U],Object);function V(){};a([V],b);function W(){};a([W],Object);function X(){};a([X],Object);function Y(){};a([Y],Object);function Z(){};a([Z],Object);function _(){};a([_],Object);function $(){};a([$],Object);function a0(){};a([a0],b);function a1(){};a([a1],b);function a2(){};a([a2],b);function a3(){};a([a3],Object);function a4(){};a([a4],Object);function a5(){};a([a5],Object);function a6(){};a([a6],Object);function a7(){};a([a7],b);function a8(){};a([a8],b);function a9(){};a([a9],b);function aa(){};a([aa],Object);function ab(){};a([ab],Object);function ac(){};a([ac],Object);function ad(){};a([ad],Object);function ae(){};a([ae],Object);function af(){};a([af],Object);function ag(){};a([ag],Object);function ah(){};a([ah],Object);function e(){this._=0;this.D=0;this.H=0;this.L=0;this.A=0;this.E=0;this.I=0;this.M=0;this.B=0;this.F=0;this.J=0;this.N=0;this.C=0;this.G=0;this.K=0;this.O=0};function g(a){this._=0;this.D=0;this.H=0;this.L=0;this.A=0;this.E=0;this.I=0;this.M=0;this.B=0;this.F=0;this.J=0;this.N=0;this.C=0;this.G=0;this.K=0;this.O=0;al(this,a)};a([e,g],Object);function r(a){return[a._,a.D,a.H,a.L,a.A,a.E,a.I,a.M,a.B,a.F,a.J,a.N,a.C,a.G,a.K,a.O]};function al(a,b){a._=b._;a.D=b.D;a.H=b.H;a.L=b.L;a.A=b.A;a.E=b.E;a.I=b.I;a.M=b.M;a.B=b.B;a.F=b.F;a.J=b.J;a.N=b.N;a.C=b.C;a.G=b.G;a.K=b.K;a.O=b.O;return a};e.prototype.R=function(a){this._=a[0];this.D=a[1];this.H=a[2];this.L=a[3];this.A=a[4];this.E=a[5];this.I=a[6];this.M=a[7];this.B=a[8];this.F=a[9];this.J=a[10];this.N=a[11];this.C=a[12];this.G=a[13];this.K=a[14];this.O=a[15];return this};function j(a,b,c){var e;var f;var g;var h;var i;var j;var k;var l;var m;var n;var o;var p;var q;var r;var d;var t;var u;var v;var w;var x;var y;var z;var A;var B;var C;var D;var E;var F;var G;var H;var I;var s;a._=(i=b._)*(e=c._)+(j=b.A)*(f=c.D)+(k=b.B)*(g=c.H)+(l=b.C)*(h=c.L);a.D=(m=b.D)*e+(o=b.E)*f+(q=b.F)*g+(d=b.G)*h;a.H=(u=b.H)*e+(v=b.I)*f+(w=b.J)*g+(x=b.K)*h;a.L=(y=b.L)*e+(z=b.M)*f+(A=b.N)*g+(B=b.O)*h;a.A=i*(n=c.A)+j*(p=c.E)+k*(r=c.I)+l*(t=c.M);a.E=m*n+o*p+q*r+d*t;a.I=u*n+v*p+w*r+x*t;a.M=y*n+z*p+A*r+B*t;a.B=i*(C=c.B)+j*(D=c.F)+k*(E=c.J)+l*(F=c.N);a.F=m*C+o*D+q*E+d*F;a.J=u*C+v*D+w*E+x*F;a.N=y*C+z*D+A*E+B*F;a.C=i*(G=c.C)+j*(H=c.G)+k*(I=c.K)+l*(s=c.O);a.G=m*G+o*H+q*I+d*s;a.K=u*G+v*H+w*I+x*s;a.O=y*G+z*H+A*I+B*s;return a};function i(a,j,c,d,b){var i;var h;var g;var f;var e;i=Math.sqrt(c*c+d*d+b*b);if(i===0){return null}h=1/ i;c*=h;d*=h;b*=h;g=Math.cos(j),f=Math.sin(j);e=1-g;a._=c*c*e+g;a.D=d*c*e+b*f;a.H=c*b*e-d*f;a.A=c*d*e-b*f;a.E=d*d*e+g;a.I=d*b*e+c*f;a.B=c*b*e+d*f;a.F=d*b*e-c*f;a.J=b*b*e+g;a.L=a.M=a.N=a.C=a.G=a.K=0;a.O=1;return a};function ao(a,g,h,i,j,b,d){var e;var f;var c;e=h-g,f=j-i,c=d-b;a._=2*b/e;a.E=2*b/f;a.B=(h+g)/e;a.F=(j+i)/f;a.J=-(d+b)/c;a.N=-1;a.K=-2*d*b/c;a.D=a.H=a.L=a.A=a.I=a.M=a.C=a.G=a.O=0;return a};e.prototype.toString=function(){return'M44'+JSON.stringify(r(this))};function ap(){};a([ap],Object);function n(){};a([n],Object);function v(a){};n.main=v;var m=function(){var a=function(){return this}();return{global:a,eval:a.eval,invoke:function(a,b,c){return a[b].apply(a,c)}}}();s(c,'_',function(){return m.global.window});s(c,'A',function(){return m.global.document});var t={'iota.jsx':{_Main:l},'mvq.jsx':{_Main:n}};d.runMain=function(b,c){var a=d.require(b);if(!a){throw new ReferenceError('entry point module not found in '+b)}if(!a._Main){throw new ReferenceError('entry point _Main not found in '+b)}if(!a._Main.main){throw new ReferenceError('entry point _Main.main(:string[]):void not found in '+b)}a._Main.main(c)};d.runTests=function(i,b){var g=d.require(i);if(!g)return;var c=g._Test;if(!c)return;if(b.length===0){var h=c.prototype;for(var e in h){if(h[e]instanceof Function&&e.match(/^test\w*$/)){b.push(e)}}}var a=new c;if(a.beforeClass!=null)a.beforeClass(b);for(var f=0;f<b.length;++f){(function(b){if(b in a){a.run(b,function(){a[b]()})}else{throw new ReferenceError('No such test method: '+b)}}(b[f]))}if(a.afterClass!=null)a.afterClass()};function h(a){window.removeEventListener('load',h);document.removeEventListener('DOMContentLoaded',h);d.runMain('iota.jsx',[])}window.addEventListener('load',h);document.addEventListener('DOMContentLoaded',h)}(JSX))